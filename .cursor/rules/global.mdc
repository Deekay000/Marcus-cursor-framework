---
description: Master rules applied to ALL files in this project, regardless of type.
alwaysApply: false
---
CRITICAL: Frontmatter Required
yaml---
description: "Master workflow and quality rules for all project files"
globs: ["**/*"]
alwaysApply: true
---
Complete Template
markdown---
description: "Master workflow and quality rules for all project files"
globs: ["**/*"]
alwaysApply: true
---

# Global Project Rules

## Workflow Protocol

### Phase Gates (NON-NEGOTIABLE)

| Transition | Requirement |
|------------|-------------|
| BLUEPRINT → CONSTRUCT | Explicit "Approve" from user |
| CONSTRUCT → VALIDATE | All plan steps done + tests pass |
| VALIDATE → COMPLETED | Exit criteria verified + changelog updated |

### Error Handling

Quote the error exactly
Diagnose root cause (not symptom)
ONE fix at a time
Test immediately
Undo if failed, re-analyze
NEVER stack untested fixes


---

## Code Quality Standards (All Languages)

### Universal Rules

| Rule | Rationale |
|------|-----------|
| No TODOs in committed code | Creates tech debt |
| No placeholder values | Causes runtime failures |
| No hardcoded secrets | Security risk |
| No print() for production logging | Use proper logger |
| No blocking I/O in async code | Performance killer |

### Naming Conventions

| Element | Convention | Example |
|---------|------------|---------|
| Functions | snake_case | `calculate_total()` |
| Classes | PascalCase | `UserService` |
| Constants | SCREAMING_SNAKE | `MAX_RETRY_COUNT` |
| Files | snake_case | `user_service.py` |

### Documentation Requirements

- Every public function: docstring explaining purpose
- Every module: header comment explaining what it contains
- Every complex algorithm: inline comments explaining logic

---

## File Organization

### Import Order (All Languages)

Standard library
Third-party packages
Local modules


Alphabetize within each group.

### File Structure

Module docstring
Imports
Constants
Type definitions
Main code
Entry point (if applicable)


---

## Verification Protocol

### After EVERY Action, Provide:
✅ Checkpoint: [Step Name]
What we did: [1 sentence]
Verification: [exact command]
Expected: [what success looks like]
If failed: [what it indicates]
Paste result to continue.

### Standard Verification Commands

| Action | Command |
|--------|---------|
| File created | `ls -la path/file && head -20 path/file` |
| Package installed | `pip list \| grep package` or `npm list package` |
| Server running | `curl -s http://localhost:PORT/health` |
| Tests pass | `pytest path/test.py -v` |
| Env var set | `grep "VAR_NAME" .env \| head -c 50` |

---

## Communication Style

### When Explaining

1. State WHAT you're doing
2. Explain WHY it matters
3. Show HOW it works
4. Describe WHAT BREAKS without it

### When Presenting Choices

1. List options with pros/cons
2. State recommendation
3. Explain reasoning
4. Ask for user's preference

### When Encountering Errors

1. Quote error exactly
2. State diagnosis
3. Propose ONE fix
4. Provide verification command
5. Wait for result

---

## Automatic Housekeeping

### Log Rotation
- Trigger: Log > 5000 characters
- Action: Summarize top 5 points → Archive, clear log

### Session Summary
- Trigger: Phase = COMPLETED
- Action: Update changelog, episodic memory

### Environment Check
- Trigger: Session start
- Action: Verify .env exists, no placeholders, services reachable
